<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Navbar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.7.0/flowbite.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    .herosec{
        padding-left: 100px;
      }

    
    @media (max-width: 724px) {
      .herosec{
        padding-left: 10px;
      }
      .gasemer{
        font-size: 10px;
    }
    .elecemer{
        font-size: 10px;
    }
    }
    
  </style>
</head>
<body class=" bg-[#EBE9F2]">
   

 <!-- Navbar -->
 <nav class="bg-[#31264B] border-gray-200">
    <div class="max-w-screen-xl flex items-center justify-between mx-auto px-6 py-4">
    
      <div class="flex items-center space-x-4">
        <button id="hamburger" class="text-gray-300 focus:outline-none">
        
          <svg id="hamburger-icon" class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
          </svg>
        
          <svg id="close-icon" class="w-6 h-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
    
        
        <a href="#" class="flex items-center">
          <img src="images/weswitchu.png" class="h-8" alt="WeSwitchU.ie Logo">
        </a>
      </div>
    
      <div class="flex items-center space-x-3 md:space-x-6">
        <div class="relative">
          <button id="user-menu-button" class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300">
            <img class="w-8 h-8 rounded-full" src="https://flowbite.com/docs/images/people/profile-picture-3.jpg" alt="User Photo">
          </button>
          <div id="user-dropdown" class="hidden absolute right-0 mt-2 bg-white text-gray-700 rounded-lg shadow-md w-48 z-50">
            <div class="px-4 py-3">
              <p class="text-sm font-medium text-gray-900">John Doe</p>
              <p class="text-sm text-gray-500 truncate">email@example.com</p>
            </div>
            <ul class="py-2">
              <li>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Personal Settings</a>
              </li>
              <li>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <aside id="default-sidebar" class="fixed top-[63px] left-0 z-40 w-64 h-[calc(100%-65px)] transition-transform -translate-x-full bg-[#31264B]" aria-label="Sidebar">
    <div class="h-full px-3 py-4 overflow-y-auto">
      <ul class="space-y-2 font-medium text-white">
        
        <!-- Dashboard Dropdown -->
        <li>
            <a href="dashboard.html"  class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700 group">
              <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"/>
                <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"/>
              </svg>
              <span class="ms-3">Dashboard</span>
            </a>
          </li>
  
        <!-- Products Dropdown -->
        <li>
          <button class="flex items-center w-full p-2 rounded-lg hover:bg-gray-700 group" onclick="toggleDropdown('products-dropdown')">
            <img src="images/business_15931237.png" class="w-5 h-5 mr-2" alt="Bills" style="filter: invert(1);"> <!-- Bills Icon -->
            <span class="ms-3 flex-1 text-left">Bills</span>
            <svg class="w-4 h-4 transition-transform group-hover:text-white" id="settings-arrow" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5 8l5 5 5-5H5z" />
            </svg>
          </button>
          <ul id="products-dropdown" class="pl-6 mt-1 hidden space-y-1">
            <li><a href="Bill_List.html"  class="block p-2 rounded-lg hover:bg-gray-600">Bill List</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Upload Bills</a></li>
            <!-- <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Add Electricity Bills</a></li> -->
          </ul>
        </li>
        <li>
          <button class="flex items-center w-full p-2 rounded-lg hover:bg-gray-700 group" onclick="toggleDropdown('meter-dropdown')">
            <img src="images/bar-graph.png" class="w-5 h-5 mr-2" alt="Meter Readings" style="filter: invert(1);"> <!-- Meter Icon -->
            <span class="ms-3 flex-1 text-left">Meter Readings</span>
            <svg class="w-4 h-4 transition-transform group-hover:text-white" id="products-arrow" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5 8l5 5 5-5H5z" />
            </svg>
          </button>
          <ul id="meter-dropdown" class="pl-6 mt-1 hidden space-y-1">
            <li><a href="javascript:void(0)" onclick="loadContent('meter-reading-list.html')" class="block p-2 rounded-lg hover:bg-gray-600">Meter Reading List</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Add Gas Readings</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Add Electricity Readings</a></li>
          </ul>
        </li>
        <li>
          <button class="flex items-center w-full p-2 rounded-lg hover:bg-gray-700 group" onclick="toggleDropdown('budget-dropdown')">
            <img src="images/money-bag.png" class="w-5 h-5 mr-2" style="filter: invert(1);" alt="Budget Plans">
            <span class="ms-3 flex-1 text-left">Fees</span>
            <svg class="w-4 h-4 transition-transform group-hover:text-white" id="products-arrow" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5 8l5 5 5-5H5z" />
            </svg>
          </button>
          <ul id="budget-dropdown" class="pl-6 mt-1 hidden space-y-1">
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Invoices</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Payments</a></li>
          </ul>
        </li>
        <li>
          <button class="flex items-center w-full p-2 rounded-lg hover:bg-gray-700 group" onclick="toggleDropdown('documents-dropdown')">
            <img src="images/folder.png" class="w-5 h-5 mr-2" style="filter: invert(1);" alt="Documents">
            <span class="ms-3 flex-1 text-left">Documents</span>
            <svg class="w-4 h-4 transition-transform group-hover:text-white" id="products-arrow" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5 8l5 5 5-5H5z" />
            </svg>
          </button>
          <ul id="documents-dropdown" class="pl-6 mt-1 hidden space-y-1">
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Document List</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Add HDF File</a></li>
          </ul>
        </li>
        <li>
          <button class="flex items-center w-full p-2 rounded-lg hover:bg-gray-700 group" onclick="toggleDropdown('settings-dropdown')">
            <img src="images/settings_3524636.png" class="w-5 h-5 mr-2" style="filter: invert(1);" alt="Documents">
            <span class="ms-3 flex-1 text-left">Settings</span>
            <svg class="w-4 h-4 transition-transform group-hover:text-white" id="products-arrow" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5 8l5 5 5-5H5z" />
            </svg>
          </button>
          <ul id="settings-dropdown" class="pl-6 mt-1 hidden space-y-1">
            <li><a href="editproperties.html" class="block p-2 rounded-lg hover:bg-gray-600">Property Settings</a></li>
            <li><a href="personalsettings.html" class="block p-2 rounded-lg hover:bg-gray-600">Personal Settings</a></li>
            <li><a href="paymentmethodadd.html" class="block p-2 rounded-lg hover:bg-gray-600">Payment Settings</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Contact</a></li>
            <li><a href="#" class="block p-2 rounded-lg hover:bg-gray-600">Add Location</a></li>
          </ul>
        </li>
  
      </ul>
    </div>
  </aside>
  
  <main id="content-area">
  <div class="flex flex-wrap items-center justify-between pr-8 py-6">
    <!-- Left Section: Welcome Message and Breadcrumb -->
    <div class="space-y-2 herosec">
      <h1 class="text-2xl font-bold text-gray-900 ">Welcome Back</h1>
      <div class="flex items-center text-sm text-gray-500 space-x-2">
        <span class="flex items-center space-x-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
          </svg>
          <span>Dashboard</span>
        </span>
        <span>›</span>
        <a href="#" class="text-purple-600 hover:underline">Overview</a>
      </div>
    </div>
  
    <div class="flex flex-wrap items-center space-x-4 mt-4">
      <!-- Gas Emergency Button -->
      <button
      class="gasemer flex items-center space-x-2 bg-red-50 text-red-600 px-4 py-2 rounded-md shadow-md hover:bg-red-100 hover:shadow-lg transition-all duration-300 emergency-btn sm:px-3 sm:py-1 sm:text-sm"> 
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-triangle-alert"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>        <span>Gas Emergency</span>
      </button>
  
      <!-- Electricity Emergency Button -->
      <button
      class="elecemer flex items-center space-x-2 bg-yellow-50 text-yellow-600 px-4 py-2 rounded-md shadow-md hover:bg-yellow-100 hover:shadow-lg transition-all duration-300 emergency-btn sm:px-3 sm:py-1 sm:text-sm"      >
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-triangle-alert"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
        <span>Electricity Emergency</span>
      </button>
    </div>
  </div>
  
  

  <div class="container px-5 mx-auto mt-5">
    <div class="grid gap-6 grid-cols-1 lg:grid-cols-3">
      <!-- Card 1: Estimated Savings -->
      <div class="flex items-center justify-between p-6 bg-white rounded-xl shadow-sm">
          <div class="flex items-center space-x-4">
              <div class="flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#31264B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-euro"><path d="M4 10h12"/><path d="M4 14h9"/><path d="M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2"/></svg>              </div>
              <div>
                  <p class="text-3xl font-bold text-gray-900">€2,459</p>
                  <p class="text-gray-500 text-sm">Estimated Savings</p>
              </div>
          </div>
          <span class="px-3 py-1 text-sm font-semibold text-green-700 bg-green-100 rounded-lg">
              ↑ +14.2%
          </span>
      </div>
  
      <!-- Card 2: Energy Usage -->
      <div class="flex items-center justify-between p-6 bg-white rounded-xl shadow-sm">
          <div class="flex items-center space-x-4">
              <div class="flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#31264B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud-lightning"><path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"/><path d="m13 12-3 5h4l-3 5"/></svg>              
              </div>
              <div>
                  <p class="text-3xl font-bold text-gray-900">892 kWh</p>
                  <p class="text-gray-500 text-sm">Energy Usage</p>
              </div>
          </div>
          <span class="px-3 py-1 text-sm font-semibold text-red-700 bg-red-100 rounded-lg">
              ↓ -5.1%
          </span>
      </div>
  
      <!-- Card 3: Refer a Friend -->
      <div class="flex flex-col justify-between p-6 bg-gradient-to-r from-[#31264B] to-[#6A4F9E] text-white rounded-xl shadow-md">
          <div class="flex justify-between items-center">
              <div class="flex items-center space-x-4">
                  <div class="flex items-center justify-center w-12 h-12 bg-white bg-opacity-20 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gift"><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>
                  </div>
                  <div>
                      <p class="text-3xl font-bold">Earn €10</p>
                      <p class="text-sm">Refer a Friend</p>
                  </div>
              </div>
              <button class="px-3 py-1 bg-white bg-opacity-20 rounded-lg text-white text-sm flex items-center space-x-2 hover:bg-opacity-30 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h11M9 21h6M17 10a5 5 0 015 5v1H2v-1a5 5 0 015-5h10z"></path>
                  </svg>
                  <span>Share</span>
              </button>
          </div>
          <div class="flex justify-between items-center mt-4">
              <p class="text-sm">12 Friends Joined</p>
              <button class="px-4 py-2 bg-white text-purple-700 font-semibold rounded-lg hover:bg-gray-100 transition" onclick="openShareModal()">
                  Invite Friends →
              </button>
          </div>
      </div>
  </div>
  <div class="w-full p-6 mt-6">
    <h2 class="text-xl font-bold text-gray-900 mb-4">Services At Property</h2>
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
        
      <!-- Electricity Button Card -->
      <button class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 transition duration-200">
          <div class="flex items-center space-x-2">
              <svg class="w-6 h-6 text-gray-900" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              <span class="text-gray-900 font-medium">Electricity</span>
          </div>
          <!-- Service Provider -->
          <div class="mt-2 flex items-center space-x-2">
              <img src="images/bge-logo.png" alt="Electricity Provider" class="w-10 h-10 rounded-full">
              <span class="text-sm text-gray-600">Electric Ireland</span>
          </div>
      </button>

      <!-- Gas Button Card -->
      <button class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 transition duration-200">
          <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
              <span class="text-gray-900 font-medium">Gas</span>
          </div>
          <!-- Service Provider -->
          <div class="mt-2 flex items-center space-x-2">
              <img src="images/bge-logo.png" alt="Gas Provider" class="w-10 h-10 rounded-full">
              <span class="text-sm text-gray-600">Bord Gáis Energy</span>
          </div>
      </button>

      <!-- Broadband Button Card -->
      <button class="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 transition duration-200">
          <div class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wifi"><path d="M12 20h.01"/><path d="M2 8.82a15 15 0 0 1 20 0"/><path d="M5 12.859a10 10 0 0 1 14 0"/><path d="M8.5 16.429a5 5 0 0 1 7 0"/></svg>
              <span class="text-gray-900 font-medium">Broadband</span>
          </div>
          <!-- Service Provider -->
          <div class="mt-2 flex items-center space-x-2">
              <img src="images/bge-logo.png" alt="Broadband Provider" class="w-10 h-10 rounded-full">
              <span class="text-sm text-gray-600">Virgin Media</span>
          </div>
      </button>

  </div>
</div>
  
  
  <div class="container mx-auto px-4 py-8">
    <div class="flex flex-wrap gap-6">
      <!-- Energy Features Section -->
      <div class="flex-1 min-w-[300px]">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Energy Features</h2>
        <div class="grid gap-6 grid-cols-1 sm:grid-cols-2">
          <!-- Solar Panels -->
          <div class="flex items-center p-4 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2a10 10 0 110 20 10 10 0 010-20zM12 6v6l4 2"></path>
              </svg>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">Solar Panels</h3>
              <p class="text-sm text-gray-500">Not Installed</p>
            </div>
          </div>
          <!-- Home Battery -->
          <div class="flex items-center p-4 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11V9a4 4 0 118 0v2m-4 4h.01"></path>
              </svg>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">Home Battery</h3>
              <p class="text-sm text-gray-500">Not Installed</p>
            </div>
          </div>
          <div class="flex items-center p-4 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11V9a4 4 0 118 0v2m-4 4h.01"></path>
              </svg>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">Home Battery</h3>
              <p class="text-sm text-gray-500">Not Installed</p>
            </div>
          </div>
          <div class="flex items-center p-4 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11V9a4 4 0 118 0v2m-4 4h.01"></path>
              </svg>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">Home Battery</h3>
              <p class="text-sm text-gray-500">Not Installed</p>
            </div>
          </div>
          <!-- Electric Vehicles -->
          <div class="flex items-center p-4 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h11M9 21h6M17 10a5 5 0 015 5v1H2v-1a5 5 0 015-5h10z"></path>
              </svg>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">Electric Vehicles</h3>
              <p class="text-sm text-gray-500">None</p>
            </div>
          </div>
          <!-- Heat Pump -->
          <div class="flex items-center p-4 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 18v-6a9 9 0 0118 0v6M9 21h6"></path>
              </svg>
            </div>
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">Heat Pump</h3>
              <p class="text-sm text-gray-500">Not Installed</p>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Household Profile Section -->
      <div class="flex-1 min-w-[300px] relative">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Household Profile</h2>
        
        <div class="p-6 bg-white rounded-lg shadow-sm relative">
            
            <!-- Edit Settings Button -->
            <button class="absolute top-2 right-2 flex items-center space-x-1 px-1 py-0.5 text-[8px] font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition 
sm:px-1 sm:py-0.5 sm:text-[7px] sm:rounded-md lg:px-4 lg:py-2 lg:text-xs lg:rounded-lg">
    <!-- Settings Icon -->
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings sm:w-3 sm:h-3 lg:w-6 lg:h-6">
        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
        <circle cx="12" cy="12" r="3"/>
    </svg>
    <span class="sm:text-[6px] lg:text-sm">Settings</span>
</button>

            
          
            
            <div class="flex items-center mb-4">
                <div class="flex items-center justify-center w-12 h-12 bg-purple-100 text-purple-600 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A8.966 8.966 0 0112 15c1.747 0 3.383.504 4.879 1.364M15 12H9m6 6H9m6 6H9"></path>
                    </svg>
                </div>
                <h3 class="ml-4 text-lg font-semibold text-gray-800">Household Profile</h3>
            </div>
            
            <ul class="text-sm text-gray-500 space-y-2">
                <li><span class="font-semibold text-gray-800">Occupants:</span> 1</li>
                <li><span class="font-semibold text-gray-800">Bedrooms:</span> 1</li>
                <li><span class="font-semibold text-gray-800">Property Type:</span> House</li>
            </ul>
        </div>
    </div>
    
  <div class="container mx-auto px-4 py-8">
    <div class="flex flex-wrap gap-6">
      <!-- Utility Services Section -->
      <div class="flex-1 bg-white rounded-lg shadow-sm p-6">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Utility Services</h2>
        <p class="text-sm text-gray-500">List or description of utility services can go here.</p>
      </div>
  
      <!-- Quick Actions Section -->
      <div class="w-full sm:w-64 bg-white rounded-lg shadow-sm p-6">
        <h2 class="text-xl font-bold text-gray-900 mb-4">Quick Actions</h2>
        <div class="space-y-3">
          <!-- Add Location -->
          <div class="flex items-center justify-between p-3 bg-purple-50 text-purple-600 rounded-lg shadow-sm cursor-pointer hover:bg-purple-100 transition">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              <span class="ml-3 text-sm font-semibold">Add Meter Reading</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
          <!-- Add Documents -->
          <div class="flex items-center justify-between p-3 bg-purple-50 text-purple-600 rounded-lg shadow-sm cursor-pointer hover:bg-purple-100 transition">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              <span class="ml-3 text-sm font-semibold">Add HDF</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
          <div class="flex items-center justify-between p-3 bg-purple-50 text-purple-600 rounded-lg shadow-sm cursor-pointer hover:bg-purple-100 transition">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              <span class="ml-3 text-sm font-semibold">Upload Documents</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
<div id="questionModal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-start pt-20 hidden">
  <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl mx-4 relative overflow-y-auto max-h-[80vh]">
      <button class="absolute top-2 right-2 text-gray-500 hover:text-gray-700" onclick="closeModal()">
          &times;
      </button>
      <div id="popupContent">Loading...</div>
  </div>
</div>
<!-- Share Modal -->
<div id="share-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center hidden">
  <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full">
      <h2 class="text-xl font-semibold mb-4 text-gray-900">Share Your Referral Link</h2>
      <p class="text-gray-700 mb-4">Invite your friends and earn rewards when they sign up!</p>

      <!-- Referral Link Copy Box -->
      <div class="flex items-center justify-between border border-gray-300 rounded-lg p-3 mb-4">
          <span id="referral-link" class="text-gray-600 text-sm truncate">https://yourapp.com/signup?ref=USER123</span>
          <button onclick="copyReferralLink()" class="text-blue-600 text-sm font-medium hover:underline">Copy</button>
      </div>

      <!-- Social Media Buttons -->
      <div class="grid grid-cols-2 gap-3">
          <a href="#" id="whatsapp-share" class="flex items-center justify-center bg-green-500 text-white px-3 py-2 rounded-lg hover:bg-green-600 transition">
              WhatsApp
          </a>
          <a href="#" id="facebook-share" class="flex items-center justify-center bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition">
              Facebook
          </a>
          <a href="#" id="twitter-share" class="flex items-center justify-center bg-blue-400 text-white px-3 py-2 rounded-lg hover:bg-blue-500 transition">
              Twitter
          </a>
          <a href="#" id="email-share" class="flex items-center justify-center bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600 transition">
              Email
          </a>
      </div>

      <!-- Close Button -->
      <button onclick="closeShareModal()" class="mt-4 bg-gray-200 text-gray-700 px-4 py-2 rounded-md w-full hover:bg-gray-300 transition">
          Close
      </button>
  </div>
  <!-- Toast Notification -->
<div id="toast" class="fixed bottom-5 right-5 flex items-center w-auto max-w-xs p-4 space-x-4 bg-gray-900 text-white text-sm rounded-lg shadow-lg hidden">
  <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
  </svg>
  <span>Referral link copied to clipboard!</span>
</div>
</div>




<script>
 const referralCode = "USER123"; // Dynamic Referral Code
const referralLink = `https://yourapp.com/signup?ref=${referralCode}`;

// Function to Copy Link and Show Toast
function copyReferralLink() {
    navigator.clipboard.writeText(referralLink).then(() => {
        showToast("Referral link copied to clipboard!");
    });
}

// Function to Show Toast
function showToast(message) {
    const toast = document.getElementById("toast");
    toast.querySelector("span").textContent = message;
    toast.classList.remove("hidden");
    toast.classList.add("flex");

    // Hide Toast after 3 seconds
    setTimeout(() => {
        toast.classList.add("hidden");
        toast.classList.remove("flex");
    }, 3000);
}

// Open Share Modal
function openShareModal() {
    document.getElementById("share-modal").classList.remove("hidden");

    // Update links dynamically
    document.getElementById("referral-link").textContent = referralLink;
    document.getElementById("whatsapp-share").href = `https://wa.me/?text=Join me on WeSwitchU and earn rewards! Sign up here: ${referralLink}`;
    document.getElementById("facebook-share").href = `https://www.facebook.com/sharer/sharer.php?u=${referralLink}`;
    document.getElementById("twitter-share").href = `https://twitter.com/intent/tweet?text=Join%20me%20on%20WeSwitchU%20and%20earn%20rewards!%20Sign%20up%20here:%20${referralLink}`;
    document.getElementById("email-share").href = `mailto:?subject=Join WeSwitchU&body=Sign up here: ${referralLink}`;
}

// Close Share Modal
function closeShareModal() {
    document.getElementById("share-modal").classList.add("hidden");
}

</script>
<script>

function loadContent(page) {
  // Update the URL hash with the page name
  location.hash = page;
  
  const contentArea = document.getElementById('content-area');
  const sidebar = document.getElementById('default-sidebar');
  const hamburgerIcon = document.getElementById('hamburger-icon');
  const closeIcon = document.getElementById('close-icon');
  
  fetch(page)
    .then(response => response.text())
    .then(data => {
      contentArea.innerHTML = data;
      // Optionally, hide the sidebar if open
      if (sidebar && !sidebar.classList.contains("-translate-x-full")) {
        sidebar.classList.add("-translate-x-full");
        hamburgerIcon?.classList.remove("hidden");
        closeIcon?.classList.add("hidden");
      }
    })
    .catch(error => {
      console.error('Error loading content:', error);
      contentArea.innerHTML = '<p class="text-red-500">Failed to load content. Please try again later.</p>';
    });
}



/* ===========================================================
   Popup Handling
=========================================================== */
function showPopup() {
  fetch("questionspopup.html")
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      return response.text();
    })
    .then(html => {
      document.getElementById("popupContent").innerHTML = html;
      document.getElementById("questionModal").classList.remove("hidden");
      setTimeout(attachEventListeners, 100);
    })
    .catch(error => {
      console.error("Error fetching popup:", error);
      document.getElementById("popupContent").innerHTML = "<p class='text-red-500'>Failed to load popup.</p>";
    });
}


document.addEventListener("DOMContentLoaded", function () {
    const hamburger = document.getElementById("hamburger");
    const sidebar = document.getElementById("default-sidebar");
    const hamburgerIcon = document.getElementById("hamburger-icon");
    const closeIcon = document.getElementById("close-icon");
    const body = document.body;
    const userMenuButton = document.getElementById("user-menu-button");
    const userDropdown = document.getElementById("user-dropdown");

    function openSidebar() {
        sidebar.classList.remove("-translate-x-full");
        body.classList.add("overflow-hidden"); // Prevent scrolling
    }

    function closeSidebar() {
        sidebar.classList.add("-translate-x-full");
        body.classList.remove("overflow-hidden"); // Enable scrolling
    }

    // Toggle Sidebar
    if (hamburger && sidebar) {
        hamburger.addEventListener("click", function () {
            if (sidebar.classList.contains("-translate-x-full")) {
                openSidebar();
            } else {
                closeSidebar();
            }
        });
    }

    // Close sidebar when clicking outside
    document.addEventListener("click", function (event) {
        if (!sidebar.contains(event.target) && !hamburger.contains(event.target)) {
            closeSidebar();
        }
    });

    // Toggle User Dropdown
    if (userMenuButton && userDropdown) {
        userMenuButton.addEventListener("click", function (event) {
            event.stopPropagation(); // Prevent closing when clicking inside dropdown
            userDropdown.classList.toggle("hidden");
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", function (event) {
            if (!userMenuButton.contains(event.target) && !userDropdown.contains(event.target)) {
                userDropdown.classList.add("hidden");
            }
        });
    }
});

document.addEventListener("DOMContentLoaded", function () {
    // Function to get URL parameters
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Check if `showPopup=true` exists in the URL
    if (getQueryParam("showPopup") === "true") {
        showPopup(); // Call the function to open the popup
    }
});


</script>


<!-- questionspopup.html -->
<script>
  function attachEventListeners() {
  console.log("Attaching event listeners...");

  // Next button (excluding add-property-button)
  document.querySelectorAll(".next-button:not(.add-property-button)").forEach(button => {
    button.addEventListener("click", function () {
      const nextStepId = this.getAttribute("data-next");
      if (nextStepId) {
        console.log(`Navigating to ${nextStepId}`);
        showStep(nextStepId);
      }
    });
  });

  const addPropertyButton = document.querySelector(".add-property-button");
if (addPropertyButton) {
    addPropertyButton.addEventListener("click", function () {
        saveCurrentProperty();
        console.log("Navigating to Property Alias Step...");
        showStep("property-alias"); // Go to the "What do you refer to this property as?" step
    });
} else {
    console.warn('Element with class "add-property-button" not found.');
}


const consentButton = document.querySelector(".consent-button");
if (consentButton) {
    consentButton.addEventListener("click", function () {
        saveCurrentProperty();  
        showStep("consent");    

        setTimeout(displayRecentProperties, 200);
    });
} else {
    console.warn('Element with class "consent-button" not found.');
}

  // Previous button
  document.querySelectorAll(".prev-button").forEach(button => {
    button.addEventListener("click", function () {
      const prevStepId = this.getAttribute("data-prev");
      if (prevStepId) {
        console.log(`Navigating back to ${prevStepId}`);
        showStep(prevStepId);
      }
    });
  });

  // Yes/No buttons in Property Setup
      document.querySelectorAll("#property-setup .yes-button, #property-setup .no-button").forEach(button => {
        button.addEventListener("click", function () {
            const selectedYes = this.classList.contains("yes-button");

            sessionStorage.setItem("propertySetupSelection", selectedYes ? "yes" : "no");

            if (selectedYes) {
                showStep("residence-check"); // Show residence-check if YES
            } else {
                showStep("home-details");  // Skip residence-check if NO
            }
        });
    });



  // Yes/No buttons in Residence Check
  document.querySelectorAll("#residence-check .yes-button, #residence-check .no-button").forEach(button => {
    button.addEventListener("click", function () {
      const nextStepId = this.getAttribute("data-next");
      if (this.classList.contains("yes-button")) {
        sessionStorage.setItem("residenceSelection", "yes");
      } else {
        sessionStorage.setItem("residenceSelection", "no");
      }
      if (nextStepId) {
        showStep(nextStepId);
      }
    });
  });

  // Observer for Utilities section
  const utilitiesSection = document.getElementById("utilities");
  if (utilitiesSection) {
    const observer = new MutationObserver(() => {
      if (!utilitiesSection.classList.contains("hidden")) {
        updateUtilitiesNextButton();
      }
    });
    observer.observe(utilitiesSection, { attributes: true, attributeFilter: ["class"] });
  }

  // Property Alias input listener
  const propertyInput = document.getElementById("property-name");
  if (propertyInput) {
    propertyInput.addEventListener("input", function () {
      if (sessionStorage.getItem("residenceSelection") === "no") {
        sessionStorage.setItem("propertyAlias", this.value.trim());
      }
      updateHeaderText();
    });
  }
}

function toggleDropdown(dropdownId) {
  const dropdown = document.getElementById(dropdownId);
  const arrow = document.getElementById(`${dropdownId.split('-')[0]}-arrow`);
  if (dropdown) {
    dropdown.classList.toggle("hidden");
  } else {
    console.warn(`Dropdown element with ID "${dropdownId}" not found.`);
  }
  if (arrow) {
    arrow.classList.toggle("rotate-180");
  } else {
    console.warn(`Arrow element with ID "${dropdownId.split('-')[0]}-arrow" not found.`);
  }
}

function toggleModernDropdown(dropdownId) {
  const dropdown = document.getElementById(dropdownId);
  const arrow = document.getElementById(`${dropdownId}-arrow`);
  if (dropdown) dropdown.classList.toggle("show");
  if (arrow) arrow.classList.toggle("up");
}


function toggleSection(sectionId) {
  const section = document.getElementById(sectionId);
  if (section) {
    section.classList.toggle("hidden");
  } else {
    console.warn(`Section with ID "${sectionId}" not found.`);
  }
}

function resetFormFields() {
  document.getElementById("property-name").value = "";
  document.getElementById("home-type").selectedIndex = 0;
  document.getElementById("primary-heating-source").selectedIndex = 0;
  document.getElementById("best-describes-you").selectedIndex = 0;
  document.getElementById("solar-pv").selectedIndex = 0;
  document.getElementById("ev-ownership").selectedIndex = 0;
  sessionStorage.removeItem("propertyAlias");
}

/* ===========================================================
   Property Handling
=========================================================== */
// Global array to store filled properties
let filledProperties = [];

/* ===========================================================
   Collect and Store Property Details
=========================================================== */
function saveCurrentProperty() {
    let propertyAlias = document.getElementById("property-name").value.trim();

    if (!propertyAlias) {
        alert("Please enter a property name before adding another.");
        return;
    }

    const homeType = document.getElementById("home-type").value;
    const heatingSource = document.getElementById("primary-heating-source").value;
    const bestDescribesYou = document.getElementById("best-describes-you").value;
    const hasSolar = document.getElementById("solar-pv").value;
    const hasEV = document.getElementById("ev-ownership").value;
    const electricity = document.getElementById("toggle-electricity")?.checked ? "Yes" : "No";
    const gas = document.getElementById("toggle-gas")?.checked ? "Yes" : "No";
    const broadband = document.getElementById("toggle-broadband")?.checked ? "Yes" : "No";

    // Store the property in an object
    const propertyData = {
        alias: propertyAlias,  // Ensure consistency with display function
        homeType,
        heatingSource,
        bestDescribesYou,
        hasSolar,
        hasEV,
        utilities: { electricity, gas, broadband }
    };

    // Ensure we are appending to the array, not overwriting it
    filledProperties.push(propertyData);

    console.log("Saved Properties List:", filledProperties);

    // Reset form fields after adding a property
    resetFormFields();
}

/* ===========================================================
   Display Recent Properties on Consent Page
=========================================================== */
function displayRecentProperties() {
    console.log("Displaying property names on consent page...");
    
    const propertyList = document.getElementById("property-list-items");
    const propertyListContainer = document.getElementById("property-list");

    if (!propertyList || !propertyListContainer) {
        console.error("Property list elements not found in DOM!");
        return;
    }

    // Clear previous entries before adding new ones
    propertyList.innerHTML = "";

    if (filledProperties.length === 0) {
        console.warn("No properties available to display!");
        return;
    }

    filledProperties.forEach((property, index) => {
        console.log(`Adding property to list: ${property.alias}`);
        const listItem = document.createElement("li");
        listItem.textContent = `${index + 1}. ${property.alias}`; // Use alias key correctly
        propertyList.appendChild(listItem);
    });

    // Show the property list section
    propertyListContainer.classList.remove("hidden");

    console.log("Final Property List:", filledProperties);
}

/* ===========================================================
   Handle 'Proceed to Consent' Button Click
=========================================================== */
const consentButton = document.querySelector(".consent-button");
if (consentButton) {
    consentButton.addEventListener("click", function () {
        saveCurrentProperty();  // Save the latest property
        showStep("consent");    // Navigate to consent page

        // Add a slight delay to ensure the properties are stored before displaying them
        setTimeout(displayRecentProperties, 200);
    });
} else {
    console.warn('Element with class "consent-button" not found.');
}

/* ===========================================================
   Reset Form Fields After Property is Added
=========================================================== */
function resetFormFields() {
    document.getElementById("property-name").value = "";
    document.getElementById("home-type").selectedIndex = 0;
    document.getElementById("primary-heating-source").selectedIndex = 0;
    document.getElementById("best-describes-you").selectedIndex = 0;
    document.getElementById("solar-pv").selectedIndex = 0;
    document.getElementById("ev-ownership").selectedIndex = 0;
    document.getElementById("toggle-electricity").checked = false;
    document.getElementById("toggle-gas").checked = false;
    document.getElementById("toggle-broadband").checked = false;
}

/* ===========================================================
   Step Navigation & UI Updates
=========================================================== */
function showStep(step) {
    console.log(`Showing step: ${step}`);

    document.querySelectorAll('.step').forEach(el => el.classList.add('hidden'));

    const nextStepElement = document.getElementById(step);
    if (nextStepElement) {
        nextStepElement.classList.remove('hidden');
    } else {
        console.error(`Step ${step} not found!`);
    }
  // Update step indicators if available
  const steps = ['property-setup', 'residence-check', 'property-alias', 'home-details', 'utilities', 'consent'];
  const stepLines = document.querySelectorAll('.step-line');
  steps.forEach((stepId, index) => {
    let indicator = document.querySelector(`.${stepId}-indicator`);
    let img = indicator ? indicator.querySelector('img') : null;
    let line = stepLines[index - 1];
    if (indicator && img) {
      if (stepId === step) {
        indicator.classList.add('text-blue-600');
        indicator.classList.remove('text-gray-400');
        img.classList.add('filter-blue');
        img.classList.remove('filter-gray');
      } else if (steps.indexOf(stepId) < steps.indexOf(step)) {
        indicator.classList.add('text-blue-600');
        indicator.classList.remove('text-gray-400');
        img.classList.add('filter-blue');
        img.classList.remove('filter-gray');
        if (line) line.classList.add('bg-blue-600');
      } else {
        indicator.classList.add('text-gray-400');
        indicator.classList.remove('text-blue-600');
        img.classList.add('filter-gray');
        img.classList.remove('filter-blue');
        if (line) line.classList.remove('bg-blue-600');
      }
    }
  });
  updateHeaderText();
}

function nextStep() {
  const steps = ['property-setup', 'residence-check', 'property-alias', 'home-details', 'utilities', 'consent'];
  const currentStep = steps.find(step => !document.getElementById(step).classList.contains('hidden'));
  const nextIndex = steps.indexOf(currentStep) + 1;
  if (nextIndex < steps.length) {
    showStep(steps[nextIndex]);
  }
}

function prevStep() {
  const steps = ['property-setup', 'residence-check', 'property-alias', 'home-details', 'utilities', 'consent'];
  const currentStep = steps.find(step => !document.getElementById(step).classList.contains('hidden'));
  const prevIndex = steps.indexOf(currentStep) - 1;
  if (prevIndex >= 0) {
    showStep(steps[prevIndex]);
  }
}

function updateUtilitiesNextButton() {
  const selection = sessionStorage.getItem("propertySetupSelection");
  const addPropertyButton = document.querySelector(".add-property-button");
  if (selection === "yes") {
    addPropertyButton?.classList.remove("hidden");
  } else {
    addPropertyButton?.classList.add("hidden");
  }
}

function updateHeaderText() {
  const dynamicLine = document.getElementById("dynamic-property-line");
  const propertyAlias = sessionStorage.getItem("propertyAlias") || "";
  if (!dynamicLine) return;
  if (sessionStorage.getItem("residenceSelection") === "yes") {
    dynamicLine.innerHTML = "Let's set up your main home for you";
  } else {
    dynamicLine.innerHTML = `Let's set up ${propertyAlias ? propertyAlias : "your property"} for you`;
  }
}

/* ===========================================================
   EV & Solar Related Functions
=========================================================== */
function toggleEVQuestions() {
  const evSelection = document.getElementById("ev-ownership").value;
  const evOneQuestions = document.getElementById("ev-one-questions");
  const evMultipleQuestions = document.getElementById("ev-multiple-questions");
  if (evOneQuestions) evOneQuestions.classList.add("hidden");
  if (evMultipleQuestions) evMultipleQuestions.classList.add("hidden");
  if (evSelection === "one" && evOneQuestions) {
    evOneQuestions.classList.remove("hidden");
  } else if (evSelection === "more-than-one" && evMultipleQuestions) {
    evMultipleQuestions.classList.remove("hidden");
  }
}

function toggleSolarFields() {
  const solarPV = document.getElementById("solar-pv");
  const solarQuestions = document.getElementById("solar-questions");
  if (solarPV && solarQuestions) {
    // Show if value is not "no"
    solarQuestions.classList.toggle("hidden", solarPV.value === "no");
  }
}

function toggleBatteryCapacity() {
  const batterySelection = document.getElementById("solar-battery").value;
  const batteryCapacityQuestion = document.getElementById("battery-capacity-question");
  if (batteryCapacityQuestion) {
    batteryCapacityQuestion.classList.toggle("hidden", batterySelection === "no");
  }
}

let evCountForAddAnother = 0;
function addAnotherEV() {
  evCountForAddAnother++;
  const evContainer = document.getElementById("ev-multiple-questions");
  if (!evContainer) return;
  const newEV = document.createElement("div");
  newEV.className = "ev-entry bg-gray-100 p-4 rounded-lg shadow-md mt-4";
  newEV.id = `ev-entry-${evCountForAddAnother}`;
  newEV.innerHTML = `
    <h4 class="font-bold text-gray-700">EV ${evCountForAddAnother} Details:</h4>
    <div>
        <label class="block text-gray-700 font-medium">Is it a full battery EV (BEV) or Plug In Hybrid (PHEV)?</label>
        <select class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg shadow-sm">
            <option value="bev">Full Battery EV (BEV)</option>
            <option value="phev">Plug In Hybrid (PHEV)</option>
        </select>
    </div>
    <div>
        <label class="block text-gray-700 font-medium">What size is your car's battery?</label>
        <input type="number" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg shadow-sm" placeholder="Enter battery size in kWh">
    </div>
    <div>
        <label class="block text-gray-700 font-medium">How many KM do you think you drive per year?</label>
        <input type="number" class="w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg shadow-sm" placeholder="Enter KM per year">
    </div>
    <div class="flex justify-between mt-4">
        <button type="button" class="px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700" onclick="removeEV('ev-entry-${evCountForAddAnother}')">Delete</button>
        <button type="button" id="add-ev-btn" class="px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700" onclick="addAnotherEV()">Add Another EV</button>
    </div>
  `;
  // Remove previous "Add Another EV" button if any
  const existingButtons = evContainer.querySelectorAll(".ev-entry button#add-ev-btn");
  existingButtons.forEach(btn => btn.remove());
  evContainer.appendChild(newEV);
}

function removeEV(evId) {
  const evElement = document.getElementById(evId);
  if (evElement) evElement.remove();
  if (document.querySelectorAll(".ev-entry").length === 0) {
    evCountForAddAnother = 0;
  }
}

</script>
<script>
function handleCompleteButtonClick() {
    console.log("✅ Complete button clicked...");

    // Ensure at least one consent checkbox is checked
    const consent1 = document.getElementById("consent-1").checked;
    const consent2 = document.getElementById("consent-2").checked;
    const consent3 = document.getElementById("consent-3").checked;

    if (!consent1 || !consent2 || !consent3) {
        alert("⚠️ Please accept all the required consents before proceeding.");
        return;
    }

    // Check if the user selected multiple properties
    const multipleProperties = sessionStorage.getItem("propertySetupSelection") === "yes";

    console.log("Redirect Decision:", multipleProperties ? "my-properties.html" : "dashboard.html");

    // Redirect based on multiple properties selection
    if (multipleProperties) {
        window.location.href = "my-properties.html";  // ✅ Correctly redirects
    } else {
        window.location.href = "dashboard.html";  // ✅ Correctly redirects
    }
}


</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    // Function to get URL parameter
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Get the selected location from URL
    const locationName = getQueryParam("location");

    // If location is present, update the UI
    if (locationName) {
        const headerSection = document.querySelector(".herosec"); // Adjust if needed

        // Create Back Button and Location Name
        const locationHeader = `
            <div class="flex items-center space-x-3 py-3">
    <!-- Back Button with Interactive Effect -->
    <button onclick="goBack()" 
        class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-all duration-200">
        <svg class="w-6 h-6 text-gray-600 hover:text-gray-900" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
        </svg>
    </button>

    <!-- Location Name with Elegant Styling -->
    <h1 class="text-3xl font-extrabold text-gray-900 tracking-wide">
        ${locationName}
    </h1>
</div>

        `;

        // Insert Back Button & Location Name
        headerSection.innerHTML = locationHeader + headerSection.innerHTML;
    }
});

// Go Back Function
function goBack() {
    window.location.href = "my-properties.html"; // Adjust based on actual page name
}
</script>



  
  <script src="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.js"></script>
</body>
</html>
