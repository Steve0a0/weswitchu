<section class="containerr">
    <div class="instructions">
        <h2>To get the most detailed comparison you will need:</h2>
        <ul>
            <li>A copy of your latest electricity, gas and broadband bill</li>
            <li>Your current meter readings</li>
            <li>Your IBAN details for your payments</li>
        </ul>
    </div>
    <div class="process-container">
        <div class="process">
            <h3>Our process:</h3>
            <p><span class="step">1. STEP ONE:</span> <br><span class="details">Your energy details</span></p>
            <p><span class="step">2. STEP TWO:</span> <br><span class="details">Select your tariff</span></p>
            <p><span class="step">3. STEP THREE:</span> <br><span class="details">Finalise & Switch</span></p>
        </div>
    
        <!-- Image Section -->
        <div class="process-image">
            <img src="images/image-switch.png" alt="Process Image">
        </div>
    </div>
    <div class="description-container">
        <p class="description">
            WeSwitchU is a premium switching service for electricity and gas plans. This means we can switch you to deals other switching sites can't.
        </p>
        <p class="description">
            With WeSwitchU, you only need to register your details once and we'll look after your energy bills going forward, saving you time and money every year.
        </p>
        <p class="description">
            We constantly monitor the energy market (for new and retention tariffs), and will switch you every year at the end of your contract, or sooner if a better deal becomes available.
        </p>
        <p class="disclaimer">
            By clicking "continue" below, you confirm you have read and agree to our <a href="#">privacy policy</a>.
        </p>
        <div class="cta">
            <button onclick="continueToStep1()">Continue to Step 1</button>
        </div>
    </div>

    <script>
        // Show Step 1
 function showStep1() {
     document.getElementById('step1Fields').style.display = 'block';
     document.getElementById('step2Fields').style.display = 'none';
     document.getElementById('step3Fields').style.display = 'none';
     document.getElementById('stepIndicator').textContent = 'Step 1:';
 }
 
 // Show Step 2 after validating Step 1
 function showStep2() {
     // Validate Step 1 fields (basic check)
     const firstName = document.getElementById('firstName').value;
     const lastName = document.getElementById('lastName').value;
     const email = document.getElementById('email').value;
     const phone = document.getElementById('phone').value;
 
     // Error elements
     const firstNameError = document.getElementById('firstNameError');
     const lastNameError = document.getElementById('lastNameError');
     const emailError = document.getElementById('emailError');
     const phoneError = document.getElementById('phoneError');
 
     // Reset previous error messages
     firstNameError.style.display = 'none';
     lastNameError.style.display = 'none';
     emailError.style.display = 'none';
     phoneError.style.display = 'none';
 
     // Check all required fields in Step 1
     let isValid = true;
     if (!firstName) {
         firstNameError.style.display = 'block';
         isValid = false;
     }
     if (!lastName) {
         lastNameError.style.display = 'block';
         isValid = false;
     }
     if (!email) {
         emailError.style.display = 'block';
         isValid = false;
     }
     if (phone.length !== 10) {
         phoneError.style.display = 'block';
         isValid = false;
     }
 
     // If validation fails, stop here
     if (!isValid) return;
 
     // Show Step 2, hide Step 1, and update the step indicator
     document.getElementById('step1Fields').style.display = 'none';
     document.getElementById('step2Fields').style.display = 'block';
     document.getElementById('step3Fields').style.display = 'none';
     document.getElementById('stepIndicator').textContent = 'Step 2:';
 }
 
 // Show Step 3 after validating Step 2
 function showStep3() {
     // Validate Step 2 fields
     const eircode = document.getElementById('eir-code').value;
     const eircodeError = document.getElementById('eircodeError');
     const selectedServices = document.querySelectorAll('.option-card.selected');
 
     // Reset previous error messages
     eircodeError.style.display = 'none';
     let isValid = true;
 
     // Check if Eircode is selected
     if (!eircode) {
         eircodeError.style.display = 'block';
         isValid = false;
     }
 
     // Check if at least one service is selected
     if (selectedServices.length === 0) {
         alert("Please select at least one service.");
         isValid = false;
     }
 
     // If validation fails, stop here
     if (!isValid) return;
 
     // Show Step 3, hide Step 2, and update the step indicator
     document.getElementById('step1Fields').style.display = 'none';
     document.getElementById('step2Fields').style.display = 'none';
     document.getElementById('step3Fields').style.display = 'block';
     document.getElementById('stepIndicator').textContent = 'Step 3:';
 }
 
 // Hide dropdown when clicking outside of it
 document.addEventListener('click', function(event) {
     const dropdownMenu = document.getElementById('dropdown-menu');
     const eirCodeInput = document.getElementById('eir-code');
 
     // Hide if the click is outside both the dropdown and the input
     if (!dropdownMenu.contains(event.target) && event.target !== eirCodeInput) {
         dropdownMenu.style.display = 'none';
     }
 });
         // Function to simulate sending the verification code
 function sendVerificationCode() {
     const phoneNumber = document.getElementById("phone").value;
 
     if (phoneNumber.length === 10) {
         // Mocking API call for sending code
         console.log(`Verification code "1111" sent to ${phoneNumber}`);
         
         // Show the verification input field
         document.getElementById("verificationCodeField").classList.remove("hidden-content");
     } else {
         console.log("Please enter a valid 10-digit mobile number");
     }
 }
 
 // Function to verify the code entered by the user
 function verifyCode() {
     const enteredCode = document.getElementById("verificationCode").value;
     const expectedCode = "1111"; // Hardcoded verification code for now
 
     if (enteredCode === expectedCode) {
         console.log("Code verified successfully!");
         document.getElementById("verificationCodeError").style.display = "none";
     } else {
         document.getElementById("verificationCodeError").style.display = "block";
         document.getElementById("verificationCodeError").textContent = "Invalid verification code. Please try again.";
     }
 }
 
     </script>

<script>
    function toggleVerifyButton() {
        const phone = document.getElementById("phone").value;
        const verifyButton = document.getElementById("verifyButton");
        verifyButton.classList.toggle("hidden-content", phone.length < 10);
    }

    // Show the verification code input field when "Verify Now" is clicked
    function showVerificationField() {
        document.getElementById("verificationCodeField").classList.remove("hidden-content");
    }

    // Show password fields if the checkbox is checked
    function togglePasswordFields() {
        const passwordFields = document.getElementById("passwordFields");
        const submitButton = document.getElementById("submitButton");
        passwordFields.classList.toggle("hidden-content");
        if (document.getElementById("multiplePropertyCheck").checked) {
            submitButton.textContent = "Submit";
        } else {
            submitButton.textContent = "Next";
        }
    }
</script>
<script>
    // Function to handle form validation
    document.getElementById('mainForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form from submitting

        // Clear any existing error messages
        let firstErrorField = null;

        function showError(fieldId, errorId) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(errorId);
            if (!field.value.trim()) { // Check if the field is empty
                error.style.display = 'block';
                field.classList.add('is-invalid');
                if (!firstErrorField) firstErrorField = field;
            } else {
                error.style.display = 'none';
                field.classList.remove('is-invalid');
            }
        }

        // Validate each field
        showError('firstName', 'firstNameError');
        showError('lastName', 'lastNameError');
        showError('phone', 'phoneError');
        showError('email', 'emailError');
        // showError('eir-code', 'eircodeError');

        if (firstErrorField) {
            firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
            firstErrorField.focus();
        } else {
            console.log('Form submitted successfully!'); // Replace this with actual form submission
        }
    });

    // Add real-time error message removal
    function addInputEventListener(fieldId, errorId) {
        const field = document.getElementById(fieldId);
        const error = document.getElementById(errorId);
        field.addEventListener('input', () => {
            error.style.display = 'none';
            field.classList.remove('is-invalid');
        });
    }

    // Initialize event listeners for each input field
    addInputEventListener('firstName', 'firstNameError');
    addInputEventListener('lastName', 'lastNameError');
    addInputEventListener('phone', 'phoneError');
    addInputEventListener('email', 'emailError');
    // addInputEventListener('eir-code', 'eircodeError');

    
</script>
<script>
    let uploadedFilesArray = []; // Global array to hold the uploaded files

// Function to handle file selection and drag-drop
function handleFiles(selectedFiles) {
const fileList = document.getElementById('fileList');

// Check if adding the new files would exceed the max limit of 5
if (uploadedFilesArray.length + selectedFiles.length > 5) {
    alert("You can upload a maximum of 5 files.");
    return;
}

for (let file of selectedFiles) {
    // Limit file count to 5
    if (uploadedFilesArray.length < 5) {
        uploadedFilesArray.push(file);
        displayFileInModal(file);
    }
}
}

// Display file in modal's file list
function displayFileInModal(file) {
const fileList = document.getElementById('fileList');
const fileItem = document.createElement('div');
fileItem.classList.add('file-item');
fileItem.innerHTML = `
    <span>${file.name}</span>
    <button onclick="removeFileFromModal('${file.name}')">Remove</button>
`;
fileList.appendChild(fileItem);
}

// Remove file from modal and update display
function removeFileFromModal(fileName) {
uploadedFilesArray = uploadedFilesArray.filter(file => file.name !== fileName);
updateFileListInModal();
}

// Update file list display in the modal
function updateFileListInModal() {
const fileList = document.getElementById('fileList');
fileList.innerHTML = "";
uploadedFilesArray.forEach(displayFileInModal);
}

// Function to handle file upload action
function uploadFiles() {
if (uploadedFilesArray.length === 0) {
    alert("No files to upload.");
    return;
}

// Placeholder upload logic (replace with actual upload logic if needed)
displayFilesInStep3(); // Call this to display the files in Step 3
$('#uploadBillModal').modal('hide'); // Close the modal after upload
}

// Display uploaded files in Step 3
function displayFilesInStep3() {
const uploadedFilesList = document.getElementById('uploadedFilesList');
const uploadedFiles = document.getElementById('uploadedFiles');

// Clear existing items
uploadedFiles.innerHTML = "";

// Add each file to the list in Step 3
uploadedFilesArray.forEach(file => {
    const listItem = document.createElement('li');
    listItem.textContent = file.name;
    uploadedFiles.appendChild(listItem);
});

// Show the uploaded files list in Step 3
uploadedFilesList.style.display = 'block';
}

// Drag-and-drop event listeners for drop area
const dropArea = document.getElementById('dropArea');
dropArea.addEventListener('dragover', (event) => {
event.preventDefault();
dropArea.classList.add('dragover');
});

dropArea.addEventListener('dragleave', () => {
dropArea.classList.remove('dragover');
});

dropArea.addEventListener('drop', (event) => {
event.preventDefault();
dropArea.classList.remove('dragover');
handleFiles(event.dataTransfer.files);
});

</script>